From de0c0b8324e776f0b851485e0fc9622fc35695b7 Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Sat, 29 Dec 2018 01:25:17 +0100
Subject: [PATCH] FileSpec: Move the fileSpec.dictLookup call inside
 fileSpec.isDict if

Fixes #704
---
 poppler/FileSpec.cc | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/poppler/FileSpec.cc b/poppler/FileSpec.cc
index 8a8b9e7e..7c12da63 100644
--- a/poppler/FileSpec.cc
+++ b/poppler/FileSpec.cc
@@ -137,11 +137,11 @@ FileSpec::FileSpec(Object *fileSpecA)
       }
     }
     obj1.free();
-  }
 
-  if (fileSpec.dictLookup("Desc", &obj1)->isString())
-    desc = obj1.getString()->copy();
-  obj1.free();
+    if (fileSpec.dictLookup("Desc", &obj1)->isString())
+      desc = obj1.getString()->copy();
+    obj1.free();
+  }
 }
 
 FileSpec::~FileSpec()
-- 
2.20.1

